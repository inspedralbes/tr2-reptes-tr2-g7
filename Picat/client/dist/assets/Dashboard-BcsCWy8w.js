import{f as z,o as G,c,w as t,r as o,j as s,a as u,d as l,e as n,g as H,t as q,i as k,l as I,F as J,m as K}from"./index-jdzLdHZF.js";const X={__name:"Dashboard",setup(O){const _=z(),d=s(""),i=s(""),f=s("master"),p=s(!1),m=s(""),v=s(""),A=["director","master"],y=s([]),b=async()=>{try{y.value=await _.fetchUsers()}catch(r){console.error(r)}};G(()=>{b()});const B=async()=>{p.value=!0,m.value="",v.value="";try{await _.register({username:d.value,password:i.value,role:f.value}),m.value=`User ${d.value} created successfully!`,d.value="",i.value="",await b()}catch(r){v.value=r.message}finally{p.value=!1}},L=async(r,e)=>{if(confirm(`Are you sure you want to delete ${e}?`))try{await _.deleteUser(r),await b()}catch(g){alert(g.message)}},M=()=>{_.logout()};return(r,e)=>{const g=o("v-toolbar-title"),$=o("v-spacer"),w=o("v-btn"),j=o("v-toolbar"),V=o("v-card-title"),U=o("v-text-field"),F=o("v-select"),R=o("v-form"),x=o("v-alert"),C=o("v-card-text"),D=o("v-card"),N=o("v-col"),S=o("v-list-item"),E=o("v-list"),P=o("v-row"),T=o("v-container");return u(),c(T,null,{default:t(()=>[l(j,{flat:"",color:"grey-darken-3"},{default:t(()=>[l(g,null,{default:t(()=>[...e[3]||(e[3]=[n("Admin Dashboard",-1)])]),_:1}),l($),l(w,{color:"error",onClick:M},{default:t(()=>[...e[4]||(e[4]=[n("Logout",-1)])]),_:1})]),_:1}),l(P,{class:"mt-5",justify:"center"},{default:t(()=>[l(N,{cols:"12",md:"6"},{default:t(()=>[l(D,{class:"mb-4"},{default:t(()=>[l(V,null,{default:t(()=>[...e[5]||(e[5]=[n("Create New User",-1)])]),_:1}),l(C,null,{default:t(()=>[l(R,{onSubmit:H(B,["prevent"])},{default:t(()=>[l(U,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=a=>d.value=a),label:"Username",required:""},null,8,["modelValue"]),l(U,{modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=a=>i.value=a),label:"Password",type:"password",required:""},null,8,["modelValue"]),l(F,{modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=a=>f.value=a),items:A,label:"Role",required:""},null,8,["modelValue"]),l(w,{color:"primary",type:"submit",loading:p.value,block:""},{default:t(()=>[...e[6]||(e[6]=[n("Create User",-1)])]),_:1},8,["loading"])]),_:1}),m.value?(u(),c(x,{key:0,type:"success",class:"mt-3"},{default:t(()=>[n(q(m.value),1)]),_:1})):k("",!0),v.value?(u(),c(x,{key:1,type:"error",class:"mt-3"},{default:t(()=>[n(q(v.value),1)]),_:1})):k("",!0)]),_:1})]),_:1})]),_:1}),l(N,{cols:"12",md:"6"},{default:t(()=>[l(D,null,{default:t(()=>[l(V,null,{default:t(()=>[...e[7]||(e[7]=[n("Manage Users",-1)])]),_:1}),l(C,null,{default:t(()=>[l(E,null,{default:t(()=>[(u(!0),I(J,null,K(y.value,a=>(u(),c(S,{key:a._id,title:a.username,subtitle:a.role},{append:t(()=>[l(w,{icon:"mdi-delete",color:"error",variant:"text",disabled:a.role==="admin"&&a.username==="Daniel",onClick:Q=>L(a._id,a.username)},null,8,["disabled","onClick"])]),_:2},1032,["title","subtitle"]))),128)),y.value.length===0?(u(),c(S,{key:0},{default:t(()=>[...e[8]||(e[8]=[n("No users found.",-1)])]),_:1})):k("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{X as default};
