import{k as R,f as $,s as z,o as G,c as d,w as t,r as l,a as r,d as o,e as s,g as H,h as _,t as J,i as V,l as K,F as O,m as Q,j as f}from"./index-jdzLdHZF.js";const Z={__name:"Dashboard",setup(W){const c=R(),w=$(),{pis:y,loading:P,error:b}=z(c),i=f(""),a=f(null),m=f(!1);G(()=>{c.fetchPIs()});const I=async()=>{if(!a.value||!i.value)return;m.value=!0;const u=new FormData;u.append("studentName",i.value);const e=Array.isArray(a.value)?a.value[0]:a.value;e&&u.append("file",e);try{await c.uploadPI(u),i.value="",a.value=null}catch(p){console.error(p)}finally{m.value=!1}},C=async u=>{confirm("Are you sure?")&&await c.deletePI(u)},D=()=>{w.logout()};return(u,e)=>{const p=l("v-toolbar-title"),U=l("v-spacer"),v=l("v-btn"),F=l("v-toolbar"),g=l("v-card-title"),A=l("v-text-field"),B=l("v-file-input"),L=l("v-form"),k=l("v-card-text"),x=l("v-card"),N=l("v-col"),M=l("v-alert"),T=l("v-progress-linear"),S=l("v-list-item"),q=l("v-list"),j=l("v-row"),E=l("v-container");return r(),d(E,null,{default:t(()=>[o(F,{flat:""},{default:t(()=>[o(p,null,{default:t(()=>[...e[2]||(e[2]=[s("Director Dashboard",-1)])]),_:1}),o(U),o(v,{color:"red",onClick:D},{default:t(()=>[...e[3]||(e[3]=[s("Logout",-1)])]),_:1})]),_:1}),o(j,null,{default:t(()=>[o(N,{cols:"12",md:"4"},{default:t(()=>[o(x,null,{default:t(()=>[o(g,null,{default:t(()=>[...e[4]||(e[4]=[s("Upload PI",-1)])]),_:1}),o(k,null,{default:t(()=>[o(L,{onSubmit:H(I,["prevent"])},{default:t(()=>[o(A,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=n=>i.value=n),label:"Student Name","prepend-icon":"mdi-account-school",required:""},null,8,["modelValue"]),o(B,{modelValue:a.value,"onUpdate:modelValue":e[1]||(e[1]=n=>a.value=n),label:"Select File","prepend-icon":"mdi-file-document",required:""},null,8,["modelValue"]),o(v,{color:"success",type:"submit",loading:m.value,block:""},{default:t(()=>[...e[5]||(e[5]=[s(" Upload PI ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1}),o(N,{cols:"12",md:"8"},{default:t(()=>[o(x,null,{default:t(()=>[o(g,null,{default:t(()=>[...e[6]||(e[6]=[s("Managed Students",-1)])]),_:1}),o(k,null,{default:t(()=>[_(b)?(r(),d(M,{key:0,type:"error"},{default:t(()=>[s(J(_(b)),1)]),_:1})):V("",!0),_(P)?(r(),d(T,{key:1,indeterminate:"",color:"primary"})):(r(),d(q,{key:2},{default:t(()=>[(r(!0),K(O,null,Q(_(y),n=>(r(),d(S,{key:n._id,title:n.studentName,subtitle:n.originalFileName},{append:t(()=>[o(v,{icon:"mdi-delete",color:"error",variant:"text",onClick:X=>C(n._id)},null,8,["onClick"])]),_:2},1032,["title","subtitle"]))),128)),_(y).length===0?(r(),d(S,{key:0},{default:t(()=>[...e[7]||(e[7]=[s("No PIs uploaded yet.",-1)])]),_:1})):V("",!0)]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{Z as default};
